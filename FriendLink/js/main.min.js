var app=new Object;app.debug=!1,app.game=$("body").attr("data-app"),app.param=$("body").attr("data-param"),app.method=$("body").attr("data-method"),app.lang=$("body").attr("data-lang"),app.platform,app.start={init:function(){FastClick.attach(document.body),retinajs(),app.isTouchDevice="ontouchstart"in document.documentElement;if(window.matchMedia("(max-width: 1024px)").matches&&(app.isTouchDevice=!0),$(".translated").removeClass("lang-en").addClass("lang-"+app.lang),app.platform=$.getUrlVar("platform"),"dev"==$.getUrlVar("mode")&&"android"!=app.tools.get_os()&&(app.game+="-ed"),""!=app.method){app.deepLinkURL=app.method+"?";var a=$.getUrlVar("tag");a&&""!=a&&(app.deepLinkURL+="tag="+a);var t=$.getUrlVar("token");t&&""!=t&&(app.deepLinkURL+="&token="+t);var e=app.deepLinkURL;e?(e=e.replace(/['"]+/g,"")).startsWith(app.game+"://")||(e=app.game+"://"+e):e=app.game+"://",app.deepLinkURL=e}else app.deepLinkURL=app.game+"://";app.ui.init()}},app.ui={init:function(){$("body").data("lang");var a=$("#lang").width();switch($("#select-language").css("width",a),$("#select-language").change(function(){var a=app.tools.get_qs(),t=$(this).val()+"?"+a.url;if("prod"!=$("body").data("env")){var e=app.tools.get_vars();a.url=a.url.replace("lang="+e.lang+"&",""),a.url=a.url.replace("lang="+e.lang,""),t="?lang="+$(this).val(),""!=a.url&&(t+="&"+a.url)}window.location.href=t}),app.tools.get_os()){case"android":$(".os-android").addClass("active"),$(".os-ios").removeClass("active")}$("#button-open").attr("href",app.deepLinkURL),$("a.track-download").on("click",function(a){app.track.download(a.target.href)}),$("a.track-button").on("click",function(a){var t="Button";""!=$(this).attr("id")&&(t=(t=(t=$(this).attr("id")).replace("-"," ")).charAt(0).toUpperCase()+t.substr(1)),app.track.button(t)}),$("footer a").on("click",function(a){app.track.footer(a.target.href)})}},app.tools={get_qs:function(){var a={},t=window.location.search.substring(1);if(app.param="action")a.url=t;else for(var e=t.split("&"),o=0;o<e.length;o++){var n=e[o].split("=");if(void 0===a[n[0]])a[n[0]]=decodeURIComponent(n[1]);else if("string"==typeof a[n[0]]){var p=[a[n[0]],decodeURIComponent(n[1])];a[n[0]]=p}else a[n[0]].push(decodeURIComponent(n[1]))}return a},get_os:function(){var a,t=navigator.userAgent;return/android/i.test(t)&&(a="android"),/iPad|iPhone|iPod/.test(t)&&(a="ios"),a},get_vars:function(){for(var a,t=[],e=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<e.length;o++)a=e[o].split("="),t.push(a[0]),t[a[0]]=a[1];return t}},app.track={download:function(a){"function"==typeof ga&&ga("send","event","download","click",a,{transport:"beacon",hitCallback:function(){}})},button:function(a){"function"==typeof ga&&ga("send","event","button","click",a,{transport:"beacon",hitCallback:function(){}})},footer:function(a){"function"==typeof ga&&ga("send","event","footer","click",a,{transport:"beacon",hitCallback:function(){}})}},$.fn.app=function(a,t){return app[a][t]?app[a][t].apply(this,Array.prototype.slice.call(arguments,1)):("object"==typeof t||!t)&&app[a].init.apply(this,arguments)},$(function(){$("body").app("start")}),function(){for(var a,t=function(){},e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],o=e.length,n=window.console=window.console||{};o--;)n[a=e[o]]||(n[a]=t)}();